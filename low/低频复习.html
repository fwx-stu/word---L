<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>低频单词复习检验</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    :root {
      --primary: #ff85a2;
      --secondary: #a6d0ff;
      --accent: #ffd166;
      --success: #8ac926;
      --error: #ff6b6b;
      --background: #fff9f9;
      --text: #5a5a72;
      --card-shadow: 0 4px 15px rgba(0,0,0,0.08);
      --transition: all 0.3s ease;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      background: linear-gradient(135deg, #fff9f9 0%, #f0f9ff 100%);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: var(--text);
      text-align: center;
      padding: 15px;
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 0 15px;
    }
    
    header {
      margin: 15px 0 10px;
      position: relative;
    }
    
    h1 {
      color: var(--primary);
      font-size: 1.7rem;
      margin-bottom: 5px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
    }
    
    .subtitle {
      color: #888;
      font-size: 1rem;
      margin-bottom: 15px;
    }
    
    .stats {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 15px;
    }
    
    .stat-box {
      background: white;
      border-radius: 15px;
      padding: 10px 15px;
      box-shadow: var(--card-shadow);
      min-width: 100px;
    }
    
    .stat-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--primary);
    }
    
    .stat-label {
      font-size: 0.85rem;
      color: #888;
    }
    
    #timer {
      background: linear-gradient(135deg, #a6d0ff 0%, #b9deff 100%);
      color: white;
    }
    
    #tips {
      background-color: rgba(255, 255, 255, 0.85);
      border-radius: 20px;
      padding: 12px 20px;
      font-size: 0.95rem;
      margin: 0 auto 20px;
      max-width: 800px;
      box-shadow: var(--card-shadow);
      border: 1px solid rgba(0,0,0,0.05);
    }
    
    #game {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 12px;
      justify-content: center;
      padding: 15px;
      margin: 0 auto 20px;
      max-width: 1000px;
    }
    
    .card {
      background: white;
      border-radius: 16px;
      padding: 18px 12px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: var(--card-shadow);
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      min-height: 90px;
      position: relative;
      overflow: hidden;
      border: 2px solid transparent;
      font-size: 1rem;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }
    
    .card.selected {
      transform: scale(1.05);
      border-color: var(--accent);
      box-shadow: 0 0 0 4px rgba(255, 209, 102, 0.3);
    }
    
    .card.match {
      animation: matchAnimation 0.8s forwards;
    }
    
    .card.hidden {
      visibility: hidden;
      opacity: 0;
      transform: scale(0);
    }
    
    .english {
      background: linear-gradient(135deg, var(--primary) 0%, #ff9eb5 100%);
      color: white;
    }
    
    .chinese {
      background: linear-gradient(135deg, var(--secondary) 0%, #b9deff 100%);
      color: #2c5d92;
    }
    
    .english.selected {
      background: linear-gradient(135deg, #ff6b93 0%, #ff9eb5 100%);
    }
    
    .chinese.selected {
      background: linear-gradient(135deg, #7db9ff 0%, #b9deff 100%);
    }
    
    .hint-highlight {
      animation: pulse 2s infinite;
      box-shadow: 0 0 15px rgba(255, 209, 102, 0.8);
    }
    
    @keyframes matchAnimation {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); background-color: var(--success); }
      100% { transform: scale(0); opacity: 0; }
    }
    
    @keyframes pulse {
      0% { box-shadow: 0 0 8px rgba(255, 209, 102, 0.6); }
      50% { box-shadow: 0 0 20px rgba(255, 209, 102, 1); }
      100% { box-shadow: 0 0 8px rgba(255, 209, 102, 0.6); }
    }
    
    #controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      margin: 20px auto;
      max-width: 600px;
    }
    
    .control-btn {
      background: white;
      border: none;
      border-radius: 50px;
      padding: 12px 20px;
      font-size: 0.95rem;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--card-shadow);
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      color: var(--text);
    }
    
    .control-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    }
    
    .control-btn:active {
      transform: translateY(1px);
    }
    
    .control-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    #prevPage { background: linear-gradient(to right, #ffd8e6, #ffb6d0); }
    #nextPage { background: linear-gradient(to right, #d0e8ff, #a6d0ff); }
    #hint { background: linear-gradient(to right, #fff0d0, #ffe4a8); }
    #reshuffle { background: linear-gradient(to right, #daffd0, #b8ffa8); }
    
    #hintCounter {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      padding: 12px 25px;
      font-size: 1rem;
      margin: 5px auto 0;
      max-width: 300px;
      box-shadow: var(--card-shadow);
      font-weight: 500;
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.4s ease;
    }
    
    .modal-content {
      background: white;
      border-radius: 25px;
      padding: 35px;
      text-align: center;
      max-width: 90%;
      width: 400px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.2);
      transform: scale(0.9);
      animation: scaleIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }
    
    .modal h2 {
      color: var(--primary);
      margin-bottom: 15px;
      font-size: 2rem;
    }
    
    .modal p {
      margin-bottom: 15px;
      font-size: 1.2rem;
      line-height: 1.6;
    }
    
    .modal-stats {
      background: rgba(166, 208, 255, 0.2);
      border-radius: 15px;
      padding: 15px;
      margin: 20px 0;
    }
    
    .modal-stats div {
      display: flex;
      justify-content: space-between;
      margin: 8px 0;
      font-size: 1.1rem;
    }
    
    .modal-btn {
      background: linear-gradient(to right, var(--primary), #ff6b93);
      color: white;
      border: none;
      border-radius: 50px;
      padding: 14px 35px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: var(--transition);
      font-weight: 600;
      box-shadow: 0 5px 15px rgba(255, 133, 162, 0.4);
      margin: 5px;
    }
    
    .modal-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255, 133, 162, 0.6);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes scaleIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    
    /* 响应式设计 */
    @media (max-width: 768px) {
      h1 { font-size: 1.5rem; }
      .stat-box { padding: 8px 12px; min-width: 80px; }
      .stat-value { font-size: 1.3rem; }
      #game { grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); }
      .card { min-height: 80px; font-size: 0.9rem; padding: 15px 10px; }
      .control-btn { padding: 10px 15px; font-size: 0.9rem; }
      .modal-content { padding: 25px; }
      .modal h2 { font-size: 1.6rem; }
    }
    
    @media (max-width: 480px) {
      h1 { font-size: 1.3rem; }
      .stats { gap: 10px; }
      .stat-box { padding: 6px 10px; min-width: 70px; }
      .stat-value { font-size: 1.1rem; }
      .stat-label { font-size: 0.75rem; }
      #game { grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 10px; }
      .card { min-height: 75px; font-size: 0.85rem; padding: 12px 8px; }
      .control-btn { flex: 1 0 40%; max-width: 45%; padding: 8px 12px; }
      /* .control-btn span { display: none; } */
      #hintCounter { padding: 10px 15px; font-size: 0.9rem; }
    }
    
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background-color: var(--primary);
      animation: confetti-fall 5s linear forwards;
      z-index: 1001;
    }
    
    @keyframes confetti-fall {
      0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    
    .encouragement {
      font-style: italic;
      color: #ff6b93;
      font-size: 1.1rem;
      margin: 15px 0;
      line-height: 1.4;
    }
    
    .final-actions {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-book"></i> 低频单词复习检验 <i class="fas fa-book"></i></h1>
      <div class="subtitle">Day1-6 随机抽取100个单词</div>
      
      <div class="stats">
        <div class="stat-box" id="timer">
          <div class="stat-value" id="timeDisplay">00:00</div>
          <div class="stat-label">用时</div>
        </div>
        <div class="stat-box">
          <div class="stat-value" id="pairCount">0</div>
          <div class="stat-label">已配对</div>
        </div>
        <div class="stat-box">
          <div class="stat-value" id="remaining">0</div>
          <div class="stat-label">剩余</div>
        </div>
      </div>
    </header>
    
    <div id="tips">
      <i class="fas fa-lightbulb"></i> 点击一个英文单词，再点击它的中文释义进行配对。匹配成功的单词会消失！全部单词配对完成即可进入下一页。
    </div>
    
    <div id="game"></div>
    
    <div id="controls">
      <button id="prevPage" class="control-btn"><i class="fas fa-arrow-left"></i> <span>上一页</span></button>
      <button id="nextPage" class="control-btn"><span>下一页</span> <i class="fas fa-arrow-right"></i></button>
      <button id="hint" class="control-btn"><i class="fas fa-lightbulb"></i> <span>提示</span></button>
      <button id="reshuffle" class="control-btn"><i class="fas fa-random"></i> <span>重新抽取</span></button>
    </div>
    
    <div id="hintCounter">提示剩余次数: <span id="hintCount">3</span> 次</div>
  </div>
  
  <!-- 单页完成弹窗 -->
  <div id="successModal" class="modal">
    <div class="modal-content">
      <h2><i class="fas fa-trophy"></i> 恭喜！</h2>
      <p>你成功完成了这一页的所有单词配对！</p>
      
      <div class="modal-stats">
        <div>
          <span>用时：</span>
          <span id="finalTime">00:00</span>
        </div>
        <div>
          <span>提示使用：</span>
          <span id="hintsUsed">0</span>
        </div>
        <div>
          <span>单词数量：</span>
          <span id="totalWords">0</span>
        </div>
      </div>
      
      <button class="modal-btn" id="continueBtn">继续游戏</button>
    </div>
  </div>
  
  <!-- 所有页面完成弹窗 -->
  <div id="finalModal" class="modal">
    <div class="modal-content">
      <h2><i class="fas fa-crown"></i> 恭喜通关！</h2>
      
      <div class="encouragement">
        <p>太棒了！你成功完成了所有单词配对！</p>
        <p>你的词汇量令人印象深刻！</p>
      </div>
      
      <div class="modal-stats">
        <div>
          <span>总用时：</span>
          <span id="totalTime">00:00</span>
        </div>
        <div>
          <span>总提示使用：</span>
          <span id="totalHintsUsed">0</span>
        </div>
        <div>
          <span>总单词数量：</span>
          <span id="totalWordsCount">100</span>
        </div>
      </div>
      
      <div class="final-actions">
        <button class="modal-btn" id="restartFinalBtn">重新开始</button>
        <button class="modal-btn" id="exitBtn" style="background: linear-gradient(to right, #a6d0ff, #7db9ff);">退出游戏</button>
      </div>
    </div>
  </div>

  <!-- 音效元素 - 音效文件位于sound/目录下 -->
  <audio id="clickSound" preload="auto">
    <source src="sound/click.mp3" type="audio/mpeg">
  </audio>
  <audio id="errorSound" preload="auto">
    <source src="sound/error.mp3" type="audio/mpeg">
  </audio>
  <audio id="successSound" preload="auto">
    <source src="sound/success.mp3" type="audio/mpeg">
  </audio>
  <audio id="winSound" preload="auto">
    <source src="sound/win.mp3" type="audio/mpeg">
  </audio>
  <audio id="finalWinSound" preload="auto">
    <source src="sound/win.mp3" type="audio/mpeg">
  </audio>

  <script>
    // 词汇数据 - 请在此处添加您的词汇
    const allWordPairs = [
  {"en": "acute", "zh": "严重的"},
  {"en": "agony", "zh": "极度痛苦"},
  {"en": "altitude", "zh": "高地"},
  {"en": "aluminum", "zh": "铝"},
  {"en": "angle", "zh": "角度"},
  {"en": "arbitrary", "zh": "任意的"},
  {"en": "artistic", "zh": "艺术的"},
  {"en": "augment", "zh": "增加"},
  {"en": "authentic", "zh": "真实的"},
  {"en": "rebel", "zh": "反抗"},
  {"en": "bond", "zh": "建立亲密的关系"},
  {"en": "captain", "zh": "运动队的队长"},
  {"en": "carrier", "zh": "运输工具"},
  {"en": "precaution", "zh": "预防措施"},
  {"en": "reception", "zh": "接受"},
  {"en": "susceptible", "zh": "易受感染的"},
  {"en": "receipt", "zh": "收据"},
  {"en": "excellent", "zh": "杰出的"},
  {"en": "discern", "zh": "识别"},
  {"en": "certainty", "zh": "确定性"},
  {"en": "certificate", "zh": "证明书"},
  {"en": "preceding", "zh": "在前的"},
  {"en": "concession", "zh": "让步"},
  {"en": "precision", "zh": "准确"},
  {"en": "decisive", "zh": "果断的"},
  {"en": "concise", "zh": "简明的"},
  {"en": "proclaim", "zh": "宣布"},
  {"en": "declaration", "zh": "宣言"},
  {"en": "inclusive", "zh": "包含广泛的"},
  {"en": "coalition", "zh": "联盟"},
  {"en": "colonial", "zh": "殖民的"},
  {"en": "comic", "zh": "喜剧的"},
  {"en": "consultant", "zh": "顾问"},
  {"en": "incorporate", "zh": "合并"},
  {"en": "counter", "zh": "反对"},
  {"en": "recreation", "zh": "娱乐"},
  {"en": "discriminate", "zh": "歧视"},
  {"en": "accumulate", "zh": "积累"},
  {"en": "incur", "zh": "招致"},
  {"en": "recur", "zh": "反复出现"},
  {"en": "occurrence", "zh": "发生的事情"},
  {"en": "corridor", "zh": "走廊"},
  {"en": "discourse", "zh": "演讲"},
  {"en": "curve", "zh": "曲线"},
  {"en": "decent", "zh": "得体的"},
  {"en": "condemn", "zh": "谴责"},
  {"en": "demographic", "zh": "人口结构的"},
  {"en": "condense", "zh": "缩短"},
  {"en": "dental", "zh": "牙科的"},
  {"en": "dentist", "zh": "牙科医生"},
  {"en": "deteriorate", "zh": "恶化"},
  {"en": "indication", "zh": "显示"},
  {"en": "indicative", "zh": "表明的"},
  {"en": "dignity", "zh": "尊严"},
  {"en": "indignation", "zh": "愤怒"},
  {"en": "dividend", "zh": "红利"},
  {"en": "domain", "zh": "领地"},
  {"en": "donate", "zh": "捐献"},
  {"en": "anecdote", "zh": "趣闻"},
  {"en": "induce", "zh": "引起"},
  {"en": "endurance", "zh": "忍耐力"},
  {"en": "ecology", "zh": "生态"},
  {"en": "exemplify", "zh": "举例说明"},
  {"en": "exempt", "zh": "免除"},
  {"en": "equation", "zh": "相等"},
  {"en": "essence", "zh": "本质"},
  {"en": "interface", "zh": "界面"},
  {"en": "preface", "zh": "前言"},
  {"en": "fatigue", "zh": "疲劳"},
  {"en": "confer", "zh": "授予"},
  {"en": "fertile", "zh": "肥沃的"},
  {"en": "fertilizer", "zh": "肥料"},
  {"en": "confess", "zh": "承认"},
  {"en": "deficiency", "zh": "缺乏"},
  {"en": "superficial", "zh": "表面的"},
  {"en": "proficiency", "zh": "熟练"},
  {"en": "feasible", "zh": "可行的"},
  {"en": "confidential", "zh": "机密的"},
  {"en": "profile", "zh": "简介"},
  {"en": "finite", "zh": "有限的"},
  {"en": "infinite", "zh": "无限的"},
  {"en": "affirm", "zh": "证实"},
  {"en": "fiscal", "zh": "财政的"},
  {"en": "flexible", "zh": "灵活的"},
  {"en": "superfluous", "zh": "过剩的"},
  {"en": "fluctuate", "zh": "波动"},
  {"en": "enforce", "zh": "强制执行"},
  {"en": "conform", "zh": "遵从"},
  {"en": "format", "zh": "形式"},
  {"en": "fortunate", "zh": "幸运的"},
  {"en": "fragile", "zh": "脆弱的"},
  {"en": "frequency", "zh": "频率"},
  {"en": "frontier", "zh": "边境"},
  {"en": "refute", "zh": "反驳"},
  {"en": "geography", "zh": "地理学"},
  {"en": "pregnant", "zh": "怀孕的"},
  {"en": "hydrogen", "zh": "氢"},
  {"en": "genre", "zh": "体裁"},
  {"en": "grand", "zh": "宏伟的"},
  {"en": "grave", "zh": "严重的"},
  {"en": "agreeable", "zh": "愉快的"},
  {"en": "gratitude", "zh": "感谢"},
  {"en": "harmony", "zh": "融洽"},
  {"en": "adhere", "zh": "黏附"},
  {"en": "heritage", "zh": "遗产"},
  {"en": "inherit", "zh": "继承"},
  {"en": "prohibit", "zh": "禁止"},
  {"en": "historic", "zh": "历史的"},
  {"en": "identical", "zh": "相同的"},
  {"en": "imaginary", "zh": "想象的"},
  {"en": "imitation", "zh": "模仿"},
  {"en": "imperative", "zh": "必要的"},
  {"en": "irony", "zh": "反语"},
  {"en": "isolate", "zh": "使隔离"},
  {"en": "peninsula", "zh": "半岛"},
  {"en": "exit", "zh": "出口"},
  {"en": "adjective", "zh": "形容词"},
  {"en": "conjunction", "zh": "同时发生"},
  {"en": "jurisdiction", "zh": "管辖权"},
  {"en": "collaborate", "zh": "合作"},
  {"en": "lateral", "zh": "横向的"},
  {"en": "delete", "zh": "删除"},
  {"en": "deliberate", "zh": "故意的"},
  {"en": "liberty", "zh": "自由"},
  {"en": "eligible", "zh": "有资格的"},
  {"en": "obligation", "zh": "义务"},
  {"en": "align", "zh": "结盟"},
  {"en": "preliminary", "zh": "初步的"},
  {"en": "linguistic", "zh": "语言的"},
  {"en": "illiterate", "zh": "文盲的"},
  {"en": "analogy", "zh": "类比"},
  {"en": "apology", "zh": "道歉"},
  {"en": "logic", "zh": "逻辑"},
  {"en": "lottery", "zh": "抽彩给奖法"},
  {"en": "lucrative", "zh": "赚钱的"},
  {"en": "paralyse", "zh": "使瘫痪"},
  {"en": "paralytical", "zh": "丧失运动功能的"},
  {"en": "magnitude", "zh": "巨大"},
  {"en": "manipulate", "zh": "操作"},
  {"en": "manufacture", "zh": "大量生产"},
  {"en": "marginal", "zh": "边缘的"},
  {"en": "marine", "zh": "海洋的"},
  {"en": "masculine", "zh": "男性的"},
  {"en": "mature", "zh": "全面的"},
  {"en": "maximum", "zh": "最大量的"},
  {"en": "remedy", "zh": "解決方法"},
  {"en": "mend", "zh": "修理"},
  {"en": "immerse", "zh": "使沉浸"},
  {"en": "immense", "zh": "巨大的"},
  {"en": "geometry", "zh": "几何学"},
  {"en": "emigrate", "zh": "移居国外"},
  {"en": "omit", "zh": "省略"},
  {"en": "premise", "zh": "前提"},
  {"en": "emit", "zh": "散发"},
  {"en": "accommodation", "zh": "住处"},
  {"en": "modernization", "zh": "现代化"},
  {"en": "naive", "zh": "幼稚的"},
  {"en": "narrative", "zh": "叙事的"},
  {"en": "negligible", "zh": "微不足道的"},
  {"en": "neutral", "zh": "中立的"},
  {"en": "denote", "zh": "表示"},
  {"en": "novelty", "zh": "新奇"},
  {"en": "numerous", "zh": "许多的"},
  {"en": "petroleum", "zh": "石油"},
  {"en": "anonymous", "zh": "匿名的"},
  {"en": "cooperative", "zh": "合作的"},
  {"en": "operational", "zh": "操作的"},
  {"en": "subordinate", "zh": "从属的"},
  {"en": "coordinate", "zh": "协调"},
  {"en": "extraordinary", "zh": "非凡的"},
  {"en": "orderly", "zh": "有秩序的"},
  {"en": "ornament", "zh": "装饰"},
  {"en": "transparent", "zh": "透明的"},
  {"en": "particle", "zh": "微粒"},
  {"en": "impatient", "zh": "不耐烦的"},
  {"en": "surpass", "zh": "超过"},
  {"en": "repel", "zh": "击退"},
  {"en": "compulsory", "zh": "义务的"},
  {"en": "expenditure", "zh": "支出"},
  {"en": "appetite", "zh": "食欲"},
  {"en": "competent", "zh": "有能力的"},
  {"en": "perpetual", "zh": "长久的"},
  {"en": "pit", "zh": "深洞"},
  {"en": "symphony", "zh": "交响乐"},
  {"en": "physicist", "zh": "物理学家"},
  {"en": "compile", "zh": "汇编"},
  {"en": "empirical", "zh": "经验主义的"},
  {"en": "plague", "zh": "瘟疫"},
  {"en": "transplant", "zh": "移植"},
  {"en": "plausible", "zh": "可信的"},
  {"en": "appliance", "zh": "电器"},
  {"en": "duplicate", "zh": "复制"},
  {"en": "compliment", "zh": "赞美"},
  {"en": "plentiful", "zh": "丰富的"},
  {"en": "explode", "zh": "爆炸"},
  {"en": "polish", "zh": "擦亮"},
  {"en": "postpone", "zh": "推迟"},
  {"en": "posture", "zh": "姿势"},
  {"en": "disposal", "zh": "清除"},
  {"en": "disposition", "zh": "性情"},
  {"en": "proposition", "zh": "主张"},
  {"en": "practitioner", "zh": "从业人员"},
  {"en": "compress", "zh": "压缩"},
  {"en": "impress", "zh": "使留下深刻印象"},
  {"en": "impressive", "zh": "给人深刻印象的"},
  {"en": "probe", "zh": "探索"},
  {"en": "probability", "zh": "可能性"},
  {"en": "prone", "zh": "易于…的"},
  {"en": "purify", "zh": "净化"},
  {"en": "quantitative", "zh": "量化的"},
  {"en": "conquer", "zh": "克服"},
  {"en": "query", "zh": "质疑"},
  {"en": "erase", "zh": "消除"},
  {"en": "rational", "zh": "理性的"},
  {"en": "erect", "zh": "建造"},
  {"en": "regime", "zh": "政权"},
  {"en": "arrest", "zh": "拘捕"},
  {"en": "rhetoric", "zh": "修辞艺术"},
  {"en": "rhythm", "zh": "节奏"},
  {"en": "rotate", "zh": "旋转"},
  {"en": "abrupt", "zh": "突然的"},
  {"en": "erupt", "zh": "爆发"},
  {"en": "sacred", "zh": "神圣的"},
  {"en": "scenery", "zh": "风景"},
  {"en": "descendant", "zh": "后裔"},
  {"en": "microscope", "zh": "显微镜"},
  {"en": "prescribe", "zh": "开（药、处方）"},
  {"en": "subscribe", "zh": "订阅"},
  {"en": "manuscript", "zh": "手稿"},
  {"en": "prescription", "zh": "药方"},
  {"en": "secondary", "zh": "中等的"},
  {"en": "assembly", "zh": "集会"},
  {"en": "assimilate", "zh": "同化"},
  {"en": "resent", "zh": "憎恶"},
  {"en": "reservation", "zh": "保留（意见）"},
  {"en": "considerate", "zh": "体贴的"},
  {"en": "preside", "zh": "主持"},
  {"en": "obsession", "zh": "痴迷"},
  {"en": "designate", "zh": "指定"},
  {"en": "signature", "zh": "签名"},
  {"en": "silicon", "zh": "硅"},
  {"en": "singular", "zh": "显著的"},
  {"en": "consistent", "zh": "始终如一的"},
  {"en": "skim", "zh": "浏览"},
  {"en": "resolution", "zh": "决心"},
  {"en": "sophisticated", "zh": "老练的"},
  {"en": "spectrum", "zh": "范围"},
  {"en": "conspicuous", "zh": "明显的"},
  {"en": "spectator", "zh": "观众"},
  {"en": "specialize", "zh": "专门研究"},
  {"en": "spiritual", "zh": "心灵的"},
  {"en": "inspiration", "zh": "灵感"},
  {"en": "spontaneous", "zh": "自发的"},
  {"en": "correspondent", "zh": "通信者"},
  {"en": "correspondence", "zh": "相似"},
  {"en": "destination", "zh": "目的地"},
  {"en": "stationary", "zh": "不动的"},
  {"en": "superstition", "zh": "迷信"},
  {"en": "distinct", "zh": "明显的"},
  {"en": "destruction", "zh": "破坏"},
  {"en": "destructive", "zh": "破坏性的"},
  {"en": "studio", "zh": "工作室"},
  {"en": "persuasion", "zh": "说服"},
  {"en": "resume", "zh": "继续"},
  {"en": "résumé", "zh": "简历"},
  {"en": "insure", "zh": "保险"},
  {"en": "ensure", "zh": "保证"},
  {"en": "absurd", "zh": "荒谬的"},
  {"en": "detach", "zh": "拆卸"},
  {"en": "tangible", "zh": "有形的"},
  {"en": "technician", "zh": "技术人员"},
  {"en": "detector", "zh": "探测器"},
  {"en": "tedious", "zh": "单调乏味的"},
  {"en": "contemplate", "zh": "深思"},
  {"en": "pretend", "zh": "假装"},
  {"en": "tense", "zh": "紧张的"},
  {"en": "tentative", "zh": "暂定的"},
  {"en": "terminate", "zh": "终止"},
  {"en": "therapy", "zh": "治疗"},
  {"en": "synthetic", "zh": "合成的"},
  {"en": "continual", "zh": "持续的"},
  {"en": "toxic", "zh": "有毒的"},
  {"en": "tractor", "zh": "拖拉机"},
  {"en": "distribute", "zh": "分发"},
  {"en": "intricate", "zh": "错综复杂的"},
  {"en": "tune", "zh": "调整"},
  {"en": "turbulent", "zh": "动荡的"},
  {"en": "abound", "zh": "大量存在"},
  {"en": "vacant", "zh": "空着的"},
  {"en": "vacuum", "zh": "空虚"},
  {"en": "extravagant", "zh": "奢侈的"},
  {"en": "prevail", "zh": "盛行"},
  {"en": "invalid", "zh": "无效的"},
  {"en": "prevalent", "zh": "流行的"},
  {"en": "revelation", "zh": "揭露"},
  {"en": "velocity", "zh": "速度"},
  {"en": "avenue", "zh": "大道"},
  {"en": "converge", "zh": "聚集"},
  {"en": "invert", "zh": "使颠倒"},
  {"en": "divert", "zh": "转移"},
  {"en": "diversion", "zh": "转移"},
  {"en": "conversely", "zh": "相反地"},
  {"en": "evident", "zh": "明显的"},
  {"en": "violent", "zh": "暴力的"},
  {"en": "virgin", "zh": "处女的"},
  {"en": "subway", "zh": "地下通道"},
  {"en": "voyage", "zh": "航行"},
  {"en": "breakdown", "zh": "崩溃"},
  {"en": "bypass", "zh": "绕过"},
  {"en": "commonwealth", "zh": "联合体"},
  {"en": "cyberspace", "zh": "网络空间"},
  {"en": "drawback", "zh": "缺点"},
  {"en":"eyebrow","zh":"眉毛"},
  {"en":"foremost","zh":"最重要的"},
  {"en":"forthcoming","zh":"即将发生的"},
  {"en":"headquarters","zh":"总部"},
  {"en":"masterpiece","zh":"杰作"},
  {"en":"meantime","zh":"其间"},
  {"en":"nearby","zh":"附近的"},
  {"en":"nightmare","zh":"噩梦"},
  {"en":"outbreak","zh":"爆发"},
  {"en":"outdoor","zh":"户外的"},
  {"en":"outrage","zh":"暴行"},
  {"en":"outset","zh":"开始"},
  {"en":"overhead","zh":"在头上方的"},
  {"en":"roundabout","zh":"迂回的"},
  {"en":"safeguard","zh":"保护措施"},
  {"en":"shortcoming","zh":"缺点"},
  {"en":"shorthand","zh":"速记"},
  { "en": "sometime", "zh": "某个时间" },
  { "en": "spacecraft", "zh": "宇宙飞船" },
  { "en": "update", "zh": "更新" },
  { "en": "upright", "zh": "直立的" },
  { "en": "upstairs", "zh": "楼上的" },
  { "en": "viewpoint", "zh": "观点" },
  { "en": "warehouse", "zh": "仓库" },
  { "en": "withhold", "zh": "拒绝给予" },
  { "en": "abide", "zh": "容忍" },
  { "en": "aboard", "zh": "在船（飞机、火车）上" },
  { "en": "acclaim", "zh": "称赞" },
  { "en": "accommodate", "zh": "提供住宿" },
  { "en": "accuse", "zh": "控告" },
  { "en": "administer", "zh": "管理" },
  { "en": "algorithm", "zh": "算法" },
  { "en": "amid", "zh": "在…中" },
  { "en": "anchor", "zh": "主持人" },
  { "en": "annoy", "zh": "使生气" },
  { "en": "appendix", "zh": "附录" },
  { "en": "assault", "zh": "袭击" },
  { "en": "attorney", "zh": "律师" },
  { "en": "bare", "zh": "裸露的" },
  { "en": "barn", "zh": "谷仓" },
  { "en": "barrel", "zh": "一桶（的量）" },
  { "en": "bay", "zh": "湾" },
  { "en": "beard", "zh": "胡须" },
  { "en": "bend", "zh": "弯曲" },
  { "en": "bible", "zh": "圣经" },
  { "en": "bind", "zh": "使紧密联系在一起" },
  { "en": "bitter", "zh": "痛苦的" },
  { "en": "bizarre", "zh": "古怪的" },
  { "en": "bleak", "zh": "不乐观的" },
  { "en": "blunder", "zh": "愚蠢的错误" },
  { "en": "blur", "zh": "模糊" },
  { "en": "boast", "zh": "吹嘘" },
  { "en": "bore", "zh": "使厌烦" },
  { "en": "boycott", "zh": "拒绝购买" },
  { "en": "brake", "zh": "阻力" },
  { "en": "breast", "zh": "胸膛" },
  { "en": "bridge", "zh": "桥梁" },
  { "en": "broker", "zh": "经纪人" },
  { "en": "bubble", "zh": "泡沫" },
  { "en": "bulb", "zh": "电灯泡" },
  { "en": "bunch", "zh": "一群" },
  { "en": "bureau", "zh": "局" },
  { "en": "bureaucracy", "zh": "官僚作风" },
  { "en": "burst", "zh": "爆发" },
  { "en": "butcher", "zh": "屠夫" },
  { "en": "cabin", "zh": "机舱" },
  { "en": "cable", "zh": "电缆" },
  { "en": "calendar", "zh": "日历" },
  { "en": "calorie", "zh": "卡路里" },
  { "en": "canteen", "zh": "餐厅" },
  { "en": "carpet", "zh": "地毯" },
  { "en": "carve", "zh": "开创" },
  { "en": "castle", "zh": "堡垒" },
  { "en": "Catholic", "zh": "天主教的" },
  { "en": "cement", "zh": "加强" },
  { "en": "chaos", "zh": "混乱" },
  { "en": "chapter", "zh": "章节" },
  { "en": "charity", "zh": "慈善" },
  { "en": "chase", "zh": "争取得到" },
  { "en": "cheer", "zh": "鼓舞" },
  { "en": "chimney", "zh": "烟囱" },
  { "en": "chip", "zh": "芯片" },
  { "en": "chop", "zh": "削减" },
  { "en": "Christian", "zh": "基督教的" },
  { "en": "chunk", "zh": "大部分" },
  { "en": "clerk", "zh": "职员" },
  { "en": "cliff", "zh": "峭崖" },
  { "en": "cling", "zh": "坚持" },
  { "en": "cocaine", "zh": "可卡因" },
  { "en": "coil", "zh": "圈" },
  { "en": "copper", "zh": "警察" },
  { "en": "cosy", "zh": "舒适的" },
  { "en": "counsel", "zh": "建议" },
  { "en": "county", "zh": "县" },
  { "en": "crawl", "zh": "缓慢行进" },
  { "en": "cream", "zh": "护肤霜" },
  { "en": "creep", "zh": "悄悄地小心行进" },
  { "en": "cricket", "zh": "板球" },
  { "en": "cripple", "zh": "残疾人" },
  { "en": "crisp", "zh": "脆的" },
  { "en": "crown", "zh": "王国" },
  { "en": "dash", "zh": "突击" },
  { "en": "dawn", "zh": "开端" },
  { "en": "deadly", "zh": "致命的" },
  { "en": "dealer", "zh": "商人" },
  { "en": "defer", "zh": "推迟" },
  { "en": "despair", "zh": "绝望" },
  { "en": "despise", "zh": "鄙视" },
  { "en": "destiny", "zh": "命运" },
  { "en": "devise", "zh": "设计" },
  { "en": "diamond", "zh": "钻石" },
  { "en": "disable", "zh": "使残废" },
  { "en": "disappoint", "zh": "使失望" },
  { "en": "discharge", "zh": "释放" },
  { "en": "disguise", "zh": "伪装" },
  { "en": "ditch", "zh": "沟" },
  { "en": "dome", "zh": "穹顶" },
  { "en": "drag", "zh": "拖累" },
  { "en": "drain", "zh": "排出" },
  { "en": "drift", "zh": "漂流" },
  { "en": "dwelling", "zh": "住所" },
  {"en":"earnest","zh":"非常认真的"},
  {"en":"editorial","zh":"社论"},
  {"en":"emergency","zh":"紧急事件"},
  {"en":"empire","zh":"大企业"},
  {"en":"enrich","zh":"使丰富"},
  {"en":"entertain","zh":"使快乐"},
  {"en":"entrance","zh":"进入权"},
  {"en":"epic","zh":"史诗般的作品"},
  { "en": "episode", "zh": "一集" },
  { "en": "epoch", "zh": "时代" },
  { "en": "esteem", "zh": "尊重" },
  { "en": "explicit", "zh": "清楚明确的" },
  { "en": "exploit", "zh": "开发" },
  { "en": "extinguish", "zh": "熄灭" },
  { "en": "fabric", "zh": "布料" },
  { "en": "faint", "zh": "微弱的" },
  { "en": "faithful", "zh": "忠实的" },
  { "en": "fancy", "zh": "想象" },
  { "en": "fashionable", "zh": "时髦的" },
  { "en": "faulty", "zh": "有故障的" },
  { "en": "feeble", "zh": "无效的" },
  { "en": "filter", "zh": "过滤" },
  { "en": "foam", "zh": "泡沫" },
  { "en": "forge", "zh": "努力加强" },
  { "en": "formula", "zh": "公式" },
  { "en": "forum", "zh": "论坛" },
  { "en": "frighten", "zh": "使惊吓" },
  { "en": "frown", "zh": "皱眉" },
  { "en": "fruitful", "zh": "成果丰富的" },
  { "en": "gamble", "zh": "冒风险" },
  { "en": "gasoline", "zh": "汽油" },
  { "en": "gear", "zh": "适合" },
  { "en": "gesture", "zh": "手势" },
  { "en": "gloomy", "zh": "昏暗的" },
  { "en": "grab", "zh": "抓住" },
  { "en": "grace", "zh": "优美" },
  { "en": "grip", "zh": "控制" },
  { "en": "gut", "zh": "本能" },
  { "en": "hamper", "zh": "妨碍" },
  { "en": "handful", "zh": "一把" },
  { "en": "haste", "zh": "匆忙" },
  { "en": "hasty", "zh": "仓促的" },
  { "en": "hatred", "zh": "仇恨" },
  { "en": "hazard", "zh": "危害" },
  { "en": "heal", "zh": "治愈" },
  { "en": "heighten", "zh": "提高" },
  { "en": "herd", "zh": "群" },
  { "en": "heroic", "zh": "英勇的" },
  { "en": "hijack", "zh": "抢劫" },
  { "en": "hip", "zh": "时髦的" },
  { "en": "holy", "zh": "神圣的" },
  { "en": "hook", "zh": "鱼钩" },
  { "en": "humorous", "zh": "幽默的" },
  { "en": "impair", "zh": "损害" },
  { "en": "incidence", "zh": "发生率" },
  { "en": "indulge", "zh": "沉溺" },
  { "en": "inertia", "zh": "情性" },
  { "en": "input", "zh": "输入" },
  { "en": "instalment", "zh": "期付款" },
  { "en": "intimate", "zh": "亲密的" },
  { "en": "intrinsic", "zh": "固有的" },
  { "en": "junior", "zh": "初级的" },
  { "en": "kindness", "zh": "体贴" },
  { "en": "kit", "zh": "成套工具" },
  { "en": "knot", "zh": "结" },
  { "en": "latitude", "zh": "纬度地区" },
  { "en": "laundry", "zh": "待洗的衣物" },
  { "en": "leap", "zh": "跳跃" },
  { "en": "levy", "zh": "征收" },
  { "en": "likelihood", "zh": "可能性" },
  { "en": "linger", "zh": "花很长时间做" },
  { "en": "load", "zh": "工作量" },
  { "en": "log", "zh": "航海日志" },
  { "en": "loosen", "zh": "松" },
  { "en": "lounge", "zh": "休息室" },
  { "en": "loyalty", "zh": "忠诚" },
  { "en": "lumber", "zh": "木材" },
  { "en": "lump", "zh": "块" },
  { "en": "marathon", "zh": "马拉松赛跑" },
  { "en": "march", "zh": "示威游行" },
  { "en": "mask", "zh": "掩盖" },
  { "en": "medieval", "zh": "中世纪的" },
  { "en": "menace", "zh": "威胁" },
  { "en": "mercury", "zh": "水银" },
  { "en": "mercy", "zh": "仁慈" },
  { "en": "mill", "zh": "磨粉机" },
  { "en": "monster", "zh": "巨大的" },
  { "en": "mortgage", "zh": "抵押贷款" },
  { "en": "mould", "zh": "塑造" },
  { "en": "municipal", "zh": "市政的" },
  { "en": "murder", "zh": "谋杀" },
  { "en": "necklace", "zh": "项链" },
  { "en": "nickname", "zh": "绰号" },
  { "en": "nitrogen", "zh": "氮气" },
  { "en": "obedient", "zh": "顺从的" },
  { "en": "obey", "zh": "服从" },
  { "en": "odds", "zh": "概率" },
  { "en": "organism", "zh": "有机体" },
  { "en": "overlap", "zh": "部分重叠" },
  { "en": "palace", "zh": "王宫" },
  { "en": "panic", "zh": "恐慌" },
  { "en": "parachute", "zh": "降落伞" },
  { "en": "paradise", "zh": "乐园" },
  { "en": "parcel", "zh": "包裹" },
  { "en": "pastime", "zh": "消遣" },
  { "en": "patrol", "zh": "巡逻" },
  { "en": "pave", "zh": "铺" },
  { "en": "plead", "zh": "恳求" },
  { "en": "plot", "zh": "密谋" },
  { "en": "plug", "zh": "插头" },
  { "en": "plunge", "zh": "暴跌" },
  {"en":"poison","zh":"毒药"},
  {"en":"portrait","zh":"肖像"},
  {"en":"pottery","zh":"陶器"},
  {"en":"preach","zh":"布道"},
  {"en":"prestige","zh":"威望"},
  {"en":"presumably","zh":"大概"},
  {"en":"prey","zh":"猎物"},
  {"en":"prose","zh":"散文体"},
  {"en": "protein", "zh": "蛋白质"},
  {"en": "pyramid", "zh": "金字塔结构"},
  {"en": "queue", "zh": "排队"},
  {"en": "radar", "zh": "雷达"},
  {"en": "radius", "zh": "半径范围"},
  {"en": "rank", "zh": "队伍"},
  {"en": "ratio", "zh": "比例"},
  {"en": "refrain", "zh": "克制"},
  {"en": "refresh", "zh": "使恢复精神"},
  {"en": "refuge", "zh": "避难所"},
  {"en": "reign", "zh": "统治时期"},
  {"en": "remains", "zh": "遗迹"},
  {"en": "repeatedly", "zh": "一再"},
  {"en": "republic", "zh": "共和国"},
  {"en": "residence", "zh": "住宅"},
  {"en": "revolutionary", "zh": "革命的"},
  {"en": "rid", "zh": "使摆脱"},
  {"en": "rigorous", "zh": "严格的"},
  {"en": "rip", "zh": "撕裂"},
  {"en": "roast", "zh": "烘烤"},
  {"en": "rumour", "zh": "谣言"},
  {"en": "savage", "zh": "凶残的"},
  {"en": "scatter", "zh": "撒播"},
  {"en": "scorn", "zh": "鄙视"},
  {"en": "scream", "zh": "尖叫"},
  {"en": "seemingly", "zh": "看似"},
  {"en": "semester", "zh": "学期"},
  {"en": "semiconductor", "zh": "半导体"},
  {"en": "shade", "zh": "阴凉处"},
  {"en": "shake", "zh": "摇动"},
  {"en": "shed", "zh": "流"},
  {"en": "sheer", "zh": "陡峭的"},
  {"en": "shield", "zh": "保护物"},
  {"en": "shove", "zh": "推挤"},
  {"en": "simplicity", "zh": "简易"},
  {"en": "sink", "zh": "沉没"},
  {"en": "skilful", "zh": "熟练的"},
  {"en": "slack", "zh": "懒散的"},
  {"en": "slogan", "zh": "口号"},
  {"en": "slot", "zh": "插槽"},
  {"en": "slum", "zh": "贫民窟"},
  {"en": "soak", "zh": "浸泡"},
  {"en": "sociology", "zh": "社会学"},
  {"en": "sovereign", "zh": "具有独立主权的"},
  {"en": "sow", "zh": "播种"},
  {"en": "spin", "zh": "旋转"},
  {"en": "splash", "zh": "液体哗哗地溅洒"},
  {"en": "spokesperson", "zh": "发言人"},
  {"en": "spray", "zh": "喷雾"},
  {"en": "spur", "zh": "激励"},
  {"en": "stare", "zh": "盯着看"},
  {"en": "starve", "zh": "挨饿"},
  {"en": "steam", "zh": "蒸汽"},
  {"en": "steep", "zh": "陡峭的"},
  {"en": "steer", "zh": "引导"},
  {"en": "steward", "zh": "管家"},
  {"en": "stiff", "zh": "艰难的"},
  {"en": "stir", "zh": "激怒"},
  {"en": "storey", "zh": "层"},
  {"en": "straw", "zh": "吸管"},
  {"en": "stride", "zh": "大步走"},
  {"en": "striking", "zh": "惊人的"},
  {"en": "strip", "zh": "拆除"},
  {"en": "stripe", "zh": "条纹"},
  {"en": "strive", "zh": "奋斗"},
  {"en": "subsidy", "zh": "补贴"},
  {"en": "successive", "zh": "接连的"},
  {"en": "surgeon", "zh": "外科医生"},
  {"en": "surveillance", "zh": "监视"},
  {"en": "tank", "zh": "箱"},
  {"en": "tease", "zh": "挑逗"},
  {"en": "telegraph", "zh": "电报"},
  {"en": "temptation", "zh": "引诱"},
  {"en": "terrific", "zh": "极好的"},
  {"en": "theoretical", "zh": "理论的"},
  {"en": "thick", "zh": "厚的"},
  {"en": "thoughtful", "zh": "沉思的"},
  {"en": "thrift", "zh": "节俭"},
  {"en": "throat", "zh": "喉咙"},
  {"en": "throne", "zh": "王位"},
  {"en": "timely", "zh": "及时的"},
  {"en": "tissue", "zh": "组织"},
  {"en": "toll", "zh": "严重的不良影响"},
  {"en": "tomb", "zh": "坟墓"},
  {"en": "torch", "zh": "火炬"},
  {"en": "tow", "zh": "拖"},
  {"en": "tragic", "zh": "悲惨的"},
  {"en": "tram", "zh": "有轨电车"},
  {"en": "transient", "zh": "短暂的"},
  {"en": "tray", "zh": "托盘"},
  {"en": "tribe", "zh": "部落"},
  {"en": "trivial", "zh": "不重要的"},
  {"en": "troop", "zh": "部队"},
  {"en": "tropical", "zh": "热带的"},
  {"en": "trumpet", "zh": "喇叭"},
  {"en": "turbine", "zh": "涡轮机"},
  {"en": "turnover", "zh": "营业额"},
  {"en": "uneasy", "zh": "不安的"},
  {"en": "unfold", "zh": "展开"},
  {"en": "utmost", "zh": "极度的"},
  {"en":"vanity","zh":"虚荣"},
  {"en":"verge","zh":"倾向"},
  {"en":"versus","zh":"与……相比较"},
  {"en":"vertical","zh":"垂直的"},
  {"en":"viable","zh":"可实施的"},
  {"en":"vicious","zh":"恶毒的"},
  {"en":"virus","zh":"病毒"},
  {"en":"weary","zh":"疲倦的"},
  {"en":"weird","zh":"奇异的"},
  {"en":"whatsoever","zh":"丝毫"},
  {"en":"wheat","zh":"小麦"},
  {"en":"wit","zh":"才思"},
  {"en":"wonderful","zh":"精彩的"},
  {"en":"workout","zh":"训练"},
  {"en":"worm","zh":"曲折行进"},
  {"en":"worship","zh":"崇拜"},
  {"en":"wound","zh":"创伤"},
  {"en":"wrap","zh":"包"}
];

    const pairsPerPage = 20;
    let selectedPairs = [];
    let currentPage = 0;
    let firstSelected = null;
    let secondSelected = null;
    let hintCount = 3; // 所有页面共享的提示次数
    let isChecking = false;
    let timer = null;
    let startTime = null;
    let elapsedTime = 0;
    let matchedPairs = 0;
    let hintCards = [];
    
    // 存储每页的用时（秒）
    let pageTimes = [];
    // 存储每页的完成状态
    let pageCompleted = [];
    
    // 存储已消除的单词
    let completedPairs = {};
    
    // 初始化状态
    function initGameState() {
      pageTimes = [];
      pageCompleted = [];
      completedPairs = {};
      
      for (let i = 0; i < 5; i++) { // 5页
        pageTimes[i] = 0;
        pageCompleted[i] = false;
        completedPairs[i] = [];
      }
      
      matchedPairs = 0;
      currentPage = 0;
    }
    
    // 随机选择100个单词
    function pickRandomPairs(count) {
      const copy = [...allWordPairs];
      shuffle(copy);
      return copy.slice(0, count);
    }
    
    // 洗牌算法
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }
    
    // 检查单词是否已被消除
    function isPairCompleted(page, enWord) {
      return completedPairs[page].includes(enWord);
    }
    
    // 标记单词为已消除
    function markPairCompleted(page, enWord) {
      if (!completedPairs[page].includes(enWord)) {
        completedPairs[page].push(enWord);
      }
    }
    
    // 音效对象
    const sounds = {
      click: document.getElementById('clickSound'),
      error: document.getElementById('errorSound'),
      success: document.getElementById('successSound'),
      win: document.getElementById('winSound'),
      finalWin: document.getElementById('finalWinSound')
    };

    // 播放音效函数
    function playSound(sound) {
      if (sounds[sound]) {
        sounds[sound].currentTime = 0;
        try {
          sounds[sound].play();
        } catch (e) {
          console.log("音效播放失败:", e);
        }
      }
    }

    // 格式化时间显示
    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = seconds % 60;
      return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    // 开始计时
    function startTimer() {
      if (timer) return;
      
      // 如果当前页已有用时记录，则继续计时
      if (pageTimes[currentPage] > 0) {
        startTime = Date.now() - pageTimes[currentPage] * 1000;
      } else {
        startTime = Date.now();
      }
      
      timer = setInterval(() => {
        elapsedTime = Math.floor((Date.now() - startTime) / 1000);
        document.getElementById('timeDisplay').textContent = formatTime(elapsedTime);
      }, 1000);
    }

    // 停止计时并保存用时
    function stopTimer() {
      if (timer) {
        clearInterval(timer);
        timer = null;
        // 保存当前页用时
        pageTimes[currentPage] = elapsedTime;
      }
    }

    // 重置当前页计时器
    function resetCurrentTimer() {
      stopTimer();
      elapsedTime = 0;
      document.getElementById('timeDisplay').textContent = formatTime(elapsedTime);
    }

    function createGame() {
      const gameContainer = document.getElementById("game");
      gameContainer.innerHTML = "";

      // 获取当前页的单词对
      const pagePairs = selectedPairs.slice(currentPage * pairsPerPage, (currentPage + 1) * pairsPerPage);
      
      // 过滤掉已完成的单词
      const activePairs = pagePairs.filter(pair => 
        !completedPairs[currentPage].includes(pair.en)
      );
      
      const cards = [];
      activePairs.forEach(pair => {
        cards.push({ text: pair.en, type: "en", match: pair.zh });
        cards.push({ text: pair.zh, type: "zh", match: pair.en });
      });

      shuffle(cards);

      // 更新统计信息
      document.getElementById('pairCount').textContent = completedPairs[currentPage].length;
      document.getElementById('remaining').textContent = activePairs.length;
      matchedPairs = completedPairs[currentPage].length;
      
      // 重置提示高亮
      hintCards = [];
      
      // 更新提示次数
      updateHintButton();

      cards.forEach(item => {
        const div = document.createElement("div");
        div.className = `card ${item.type === "en" ? "english" : "chinese"}`;
        div.textContent = item.text;
        div.dataset.match = item.match;
        div.dataset.type = item.type;
        gameContainer.appendChild(div);

        div.addEventListener("click", () => {
          if (div.classList.contains("hidden") || isChecking) return;
          
          // 如果是第一次点击，启动计时器
          if (!timer && matchedPairs === 0) {
            startTimer();
          }
          
          playSound('click');
          div.classList.add('selected');
          
          // 如果点击的是提示高亮的卡片，移除高亮
          if (hintCards.includes(div)) {
            hintCards = hintCards.filter(card => card !== div);
            div.classList.remove('hint-highlight');
          }
          
          if (!firstSelected) {
            firstSelected = div;
          } else if (!secondSelected && div !== firstSelected) {
            secondSelected = div;
            isChecking = true;
            
            // 检查是否匹配
            if (firstSelected.dataset.match === secondSelected.textContent &&
                secondSelected.dataset.match === firstSelected.textContent) {
              playSound('success');
              
              // 匹配成功
              firstSelected.classList.add('match');
              secondSelected.classList.add('match');
              
              setTimeout(() => {
                // 获取英文单词
                const enCard = firstSelected.dataset.type === "en" ? firstSelected : secondSelected;
                const enWord = enCard.textContent;
                
                // 标记为已完成
                markPairCompleted(currentPage, enWord);
                
                firstSelected.classList.add("hidden");
                secondSelected.classList.add("hidden");
                resetSelection();
                isChecking = false;
                
                // 更新统计信息
                matchedPairs++;
                document.getElementById('pairCount').textContent = matchedPairs;
                document.getElementById('remaining').textContent = activePairs.length - matchedPairs;
                
                // 检查游戏是否完成
                checkGameCompletion();
              }, 800);
            } else {
              playSound('error');
              
              // 匹配失败
              setTimeout(() => {
                firstSelected.classList.remove("selected");
                secondSelected.classList.remove("selected");
                resetSelection();
                isChecking = false;
              }, 800);
            }
          }
        });
      });

      updateNavigation();
      
      // 显示当前页的用时
      if (pageTimes[currentPage] > 0) {
        document.getElementById('timeDisplay').textContent = formatTime(pageTimes[currentPage]);
      } else {
        document.getElementById('timeDisplay').textContent = "00:00";
      }
    }

    function resetSelection() {
      firstSelected = null;
      secondSelected = null;
    }

    function updateNavigation() {
      document.getElementById("prevPage").disabled = currentPage === 0;
      document.getElementById("nextPage").disabled = (currentPage + 1) * pairsPerPage >= selectedPairs.length;
    }

    function updateHintButton() {
      document.getElementById("hintCount").textContent = hintCount;
      document.getElementById("hint").disabled = hintCount === 0;
    }

    function giveHint() {
      if (hintCount <= 0 || isChecking) return;
      
      const cards = Array.from(document.querySelectorAll('.card:not(.hidden)'));
      for (let i = 0; i < cards.length; i++) {
        for (let j = i + 1; j < cards.length; j++) {
          if (
            cards[i].dataset.match === cards[j].textContent &&
            cards[j].dataset.match === cards[i].textContent
          ) {
            // 添加提示动画
            cards[i].classList.add('hint-highlight');
            cards[j].classList.add('hint-highlight');
            
            // 保存高亮卡片以便后续移除
            hintCards.push(cards[i], cards[j]);
            
            hintCount--;
            updateHintButton();
            return;
          }
        }
      }
    }

    function checkGameCompletion() {
      const visibleCards = document.querySelectorAll('.card:not(.hidden)');
      if (visibleCards.length === 0) {
        // 游戏完成
        stopTimer();
        pageCompleted[currentPage] = true;
        
        setTimeout(() => {
          playSound('win');
          showConfetti();
          
          // 更新模态框信息
          document.getElementById('finalTime').textContent = formatTime(pageTimes[currentPage]);
          document.getElementById('hintsUsed').textContent = 3 - hintCount;
          document.getElementById('totalWords').textContent = pairsPerPage;
          
          document.getElementById('successModal').style.display = 'flex';
        }, 500);
      }
    }
    
    // 检查所有页面是否完成
    function checkAllPagesCompleted() {
      for (let i = 0; i < 5; i++) {
        if (!pageCompleted[i]) return false;
      }
      return true;
    }
    
    // 显示最终完成弹窗
    function showFinalModal() {
      // 计算总用时
      let totalSeconds = 0;
      pageTimes.forEach(time => {
        totalSeconds += time;
      });
      
      // 更新最终统计
      document.getElementById('totalTime').textContent = formatTime(totalSeconds);
      document.getElementById('totalHintsUsed').textContent = 3 - hintCount;
      
      // 显示弹窗
      document.getElementById('finalModal').style.display = 'flex';
      playSound('finalWin');
      showConfetti();
    }

    function showConfetti() {
      const colors = ['#ff85a2', '#a6d0ff', '#ffd166', '#8ac926', '#ff6b6b'];
      for (let i = 0; i < 80; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + 'vw';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.width = Math.random() * 10 + 5 + 'px';
        confetti.style.height = confetti.style.width;
        confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
        document.body.appendChild(confetti);
        
        setTimeout(() => {
          confetti.remove();
        }, 5000);
      }
    }
    
    // 重新抽取单词
    function reshufflePairs() {
      selectedPairs = pickRandomPairs(100);
      hintCount = 3; // 重置提示次数
      initGameState();
      createGame();
    }

    // 初始化游戏
    document.getElementById("prevPage").addEventListener("click", () => {
      if (currentPage > 0) {
        stopTimer();
        currentPage--;
        createGame();
      }
    });

    document.getElementById("nextPage").addEventListener("click", () => {
      if ((currentPage + 1) * pairsPerPage < selectedPairs.length) {
        stopTimer();
        currentPage++;
        createGame();
      }
    });

    document.getElementById("hint").addEventListener("click", giveHint);
    document.getElementById("reshuffle").addEventListener("click", reshufflePairs);

    document.getElementById("continueBtn").addEventListener("click", () => {
      document.getElementById('successModal').style.display = 'none';
      
      // 检查是否所有页面都已完成
      if (checkAllPagesCompleted()) {
        showFinalModal();
      } else if (currentPage < 4) { // 5页（0-4）
        currentPage++;
        createGame();
      }
    });
    
    document.getElementById("restartFinalBtn").addEventListener("click", () => {
      document.getElementById('finalModal').style.display = 'none';
      reshufflePairs();
    });
    
    document.getElementById("exitBtn").addEventListener("click", () => {
      alert("感谢使用单词复习检验！您可以关闭此页面退出。");
    });

    // 初始加载
    initGameState();
    selectedPairs = pickRandomPairs(100);
    createGame();
  </script>
</body>
</html>